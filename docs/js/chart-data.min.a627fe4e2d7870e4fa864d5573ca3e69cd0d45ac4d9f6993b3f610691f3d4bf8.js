function chartLabels(b,c){var a=c.map(a=>a.date);return b=='pos_rate'?a=a.slice(154):(b=='vaccine_doses'||b=='vaccine_residents')&&(a=a.slice(154)),a}function fillDataset(a,b,c){return{data:a,pointRadius:0,type:'line',fill:'origin',label:b,backgroundColor:c,borderWidth:2,order:1,lineTension:0}}function primaryLineDataset(a,b,c){return{data:a,pointRadius:0,type:'line',fill:!1,label:b,borderColor:c,borderWidth:2,order:1,lineTension:0}}function secondaryLineDataset(a,b){return{data:a,pointRadius:0,type:'line',fill:!1,label:b,borderColor:'#aaaaaa',borderWidth:1,order:1,lineTension:0}}function chartData(a,b){var d,c;return datasets=[],a=='total'||a=='new'?(a=='total'?(d="total_cases"):a=='new'&&(d="new_cases"),keys.forEach(function(f,e){var c={data:b.map(a=>a[d][f]),label:categories[e],backgroundColor:categoryColors[e]};a=='total'?(c.fill='origin',c.pointRadius=0):a=='new'&&(c.borderColor=categoryColors[e],c.order=2,c.categoryPercentage=1,c.barPercentage=1),datasets.push(c)}),a=='new'&&datasets.push({data:b.map(a=>a.average_daily_cases_7d??Number.NaN),pointRadius:0,type:'line',fill:!1,label:'7-day Average',borderColor:'#bb0000',borderWidth:2,order:1,lineTension:0})):a=='risk_level'?datasets.push(primaryLineDataset(b.map(a=>a.average_daily_cases_14d_100k??Number.NaN),'14-day Average Daily Cases per 100K','#000')):a=='active'?(datasets.push(primaryLineDataset(b.map(a=>a.average_active_cases_7d??Number.NaN),'7-day Average','#bb7700')),datasets.push(secondaryLineDataset(b.map(a=>a.active_cases),'Active Cases'))):a=='pos_rate'?(datasets.push(primaryLineDataset(b.slice(154).map(a=>a.positivity_rate??Number.NaN),'14-day Positivity Rate','#0077cc')),c=secondaryLineDataset(b.slice(154).map(a=>a.tests.average_14d??Number.NaN),'14-day Average Daily Tests'),c.yAxisID='y_tests',datasets.push(c)):a=='vaccine_doses'?(datasets.push(primaryLineDataset(b.slice(154).map(a=>a.doses_average_7d??Number.NaN),'7-day Average','#8915b0')),c=secondaryLineDataset(b.slice(154).map(a=>a.doses??Number.NaN),'Doses Administered'),datasets.push(c)):a=='vaccine_residents'&&(datasets.push(fillDataset(b.slice(154).map(a=>a.completed??Number.NaN),'Fully Vaccinated','#13d694')),c=fillDataset(b.slice(154).map(a=>a.initiated??Number.NaN),'Initiated Vaccination','#0fa673'),datasets.push(c)),datasets}