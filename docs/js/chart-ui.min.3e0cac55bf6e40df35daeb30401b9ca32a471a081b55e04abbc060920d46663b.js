var totalCasesButton=document.getElementById("total-cases"),newCasesButton=document.getElementById("new-cases"),activeCasesButton=document.getElementById("active-cases"),positivityRateButton=document.getElementById("positivity-rate"),dateMarkersButton=document.getElementById("date-markers"),yAxisModeButton=document.getElementById("linear-logarithmic");function changeChart(a,c){let b="button-selected";a!='date_markers'&&(totalCasesButton.classList.remove(b),newCasesButton.classList.remove(b),activeCasesButton.classList.remove(b),positivityRateButton.classList.remove(b)),a=='total'||a=='yAxis'?totalCasesButton.classList.add(b):a=='new'?newCasesButton.classList.add(b):a=='active'?activeCasesButton.classList.add(b):a=='pos_rate'?positivityRateButton.classList.add(b):a=='date_markers'&&(dateMarkersButton.classList.contains(b)?(dateMarkersButton.classList.remove(b),dateMarkersButton.innerHTML="Date Markers",chart.options.annotation={}):(dateMarkersButton.classList.add(b),dateMarkersButton.innerHTML="Date Markers",chart.options.annotation=markers)),a!='total'&&a!='yAxis'?(yAxisModeButton.style='display: none',yAxisModeButton.innerHTML="Linear"):(yAxisModeButton.style=null,a=='yAxis'&&(yAxisModeButton.innerHTML=="Linear"?(yAxisModeButton.innerHTML="Logarithmic",chart.options.scales.yAxes[0].type='logarithmic',chart.options.scales.yAxes[0].ticks.max=1e4):yAxisModeButton.innerHTML=="Logarithmic"&&(yAxisModeButton.innerHTML="Linear",chart.options.scales.yAxes[0].type='linear',chart.options.scales.yAxes[0].ticks.max=chart.options.scales.yAxes[0].ticks.suggestedMax))),a!='date_markers'&&a!='yAxis'?reloadChart(a,c):chart.update()}function reloadChart(a,b){chart.destroy(),a=='new'?chartType='bar':chartType='line',chart=new Chart(ctx,{type:chartType,options:{responsive:!0,aspectRatio:2,scales:{xAxes:[{type:'time',time:{tooltipFormat:'MMMM D, YYYY',unit:'month'}}],yAxes:[{ticks:{beginAtZero:!0}}]},tooltips:{mode:'index',intersect:!1}}}),chart.data.labels=chartLabels(a,b),chart.data.datasets=chartData(a,b),a=='total'?(chart.options.scales.xAxes[0].stacked=!0,chart.options.scales.yAxes[0].stacked=!0,chart.options.plugins={filler:{propagate:!1}}):a=='new'?(chart.options.scales.xAxes[0].stacked=!0,chart.options.scales.yAxes[0].stacked=!0,chart.options.plugins={}):a=='active'?(chart.options.scales.xAxes[0].stacked=!1,chart.options.scales.yAxes[0].stacked=!1):a=='pos_rate'&&(chart.options.scales.xAxes[0].stacked=!1,chart.options.scales.yAxes[0].stacked=!1),a=='pos_rate'&&(chart.options.scales.yAxes=[{id:'pos_rate',position:'left',ticks:{beginAtZero:!0},gridLines:{display:!0}},{id:'tests',position:'right',ticks:{beginAtZero:!0,lineWidth:0},gridLines:{display:!0}}],chart.options.scales.yAxes[0].ticks.userCallback=function(a,b,c){return a=a.toString(),a=a.split(/(?=(?:...)*$)/),a+'%'},chart.options.tooltips.callbacks={label:function(a,b){if(value=a.yLabel.toString(),a.datasetIndex==0)return'14-day Positivity Rate: '+value+'%';if(a.datasetIndex==1)return'14-day Average Daily Tests: '+value}}),restyleChartForDarkMode(),dateMarkersButton.classList.contains("button-selected")?chart.options.annotation=markers:chart.options.annotation={},chart.update()}function isDarkMode(){return!!(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)}function restyleChartForDarkMode(){if(isDarkMode()){chart.options.scales.xAxes[0].gridLines.color='rgba(255,255,255,0.1)',chart.options.scales.yAxes[0].gridLines.color='rgba(255,255,255,0.1)';try{chart.options.scales.xAxes[1].gridLines.color='rgba(255,255,255,0.1)',chart.options.scales.yAxes[1].gridLines.color='rgba(255,255,255,0.1)'}catch{}}else{chart.options.scales.xAxes[0].gridLines.color='rgba(0,0,0,0.1)',chart.options.scales.yAxes[0].gridLines.color='rgba(0,0,0,0.1)';try{chart.options.scales.xAxes[1].gridLines.color='rgba(0,0,0,0.1)',chart.options.scales.yAxes[1].gridLines.color='rgba(0,0,0,0.1)'}catch{}}}function reloadChartForTraitChange(a){'trait'=='darkMode'&&restyleChartForDarkMode(),chart.update()}