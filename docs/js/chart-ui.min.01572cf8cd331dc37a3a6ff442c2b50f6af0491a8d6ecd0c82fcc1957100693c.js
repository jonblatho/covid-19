var totalCasesButton=document.getElementById("total-cases"),newCasesButton=document.getElementById("new-cases"),activeCasesButton=document.getElementById("active-cases"),positivityRateButton=document.getElementById("positivity-rate"),dateMarkersButton=document.getElementById("date-markers"),yAxisModeButton=document.getElementById("linear-logarithmic");function changeChart(a,c){let b="button-selected";a!='date_markers'&&(totalCasesButton.classList.remove(b),newCasesButton.classList.remove(b),activeCasesButton.classList.remove(b),positivityRateButton.classList.remove(b)),a=='total'||a=='yAxis'?totalCasesButton.classList.add(b):a=='new'?newCasesButton.classList.add(b):a=='active'?activeCasesButton.classList.add(b):a=='pos_rate'?positivityRateButton.classList.add(b):a=='date_markers'&&(dateMarkersButton.classList.contains(b)?(dateMarkersButton.classList.remove(b),dateMarkersButton.innerHTML="Date Markers",chart.options.plugins.annotation={}):(dateMarkersButton.classList.add(b),dateMarkersButton.innerHTML="Date Markers",chart.options.plugins.annotation=markers)),a!='total'&&a!='yAxis'&&a!='date_markers'?(yAxisModeButton.style='display: none',yAxisModeButton.innerHTML="Linear"):a!='date_markers'&&(yAxisModeButton.style=null,a=='yAxis'&&(yAxisModeButton.innerHTML=="Linear"?(yAxisModeButton.innerHTML="Logarithmic",chart.options.scales.y.type='logarithmic',chart.options.scales.y.max=1e4):yAxisModeButton.innerHTML=="Logarithmic"&&(yAxisModeButton.innerHTML="Linear",chart.options.scales.y.type='linear',chart.options.scales.y.max=chart.options.scales.y.suggestedMax))),a!='date_markers'&&a!='yAxis'?reloadChart(a,c):chart.update()}function reloadChart(a,b){chart.destroy(),a=='new'?chartType='bar':chartType='line',chart=new Chart(ctx,{type:chartType,options:{responsive:!0,aspectRatio:2,scales:{x:{type:'time',time:{tooltipFormat:'MMMM D, yyyy',unit:'month'}},y:{min:0,display:'auto'},y_tests:{position:'right',display:'auto',min:0}},plugins:{annotation:markers},interaction:{mode:'index',intersect:!1}}}),chart.data.labels=chartLabels(a,b),chart.data.datasets=chartData(a,b),a=='total'?(chart.options.scales.x.stacked=!0,chart.options.scales.y.stacked=!0):a=='new'?(chart.options.scales.x.stacked=!0,chart.options.scales.y.stacked=!0):(a=='active'||a=='pos_rate')&&(chart.options.scales.x.stacked=!1,chart.options.scales.y.stacked=!1),a=='pos_rate'&&(chart.options.scales={x:{type:'time',time:{tooltipFormat:'MMMM d, yyyy',unit:'month'}},y:{type:'linear',position:'left',min:0,gridLines:{display:!0},ticks:{callback:function(a,b,c){return a=a.toString(),a=a.split(/(?=(?:...)*$)/),a+'%'}}},y_tests:{type:'linear',position:'right',min:0,gridLines:{display:!0}}}),restyleChartForDarkMode(),dateMarkersButton.classList.contains("button-selected")?chart.options.plugins.annotation=markers:chart.options.plugins.annotation={},chart.update()}function isDarkMode(){return!!(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)}function restyleChartForDarkMode(){if(isDarkMode())chart.options.scales.y.gridLines.color='rgba(255,255,255,0.1)',chart.options.scales.y.gridLines.color='rgba(255,255,255,0.1)';else{chart.options.scales.y.gridLines.color='rgba(0,0,0,0.1)',chart.options.scales.y.gridLines.color='rgba(0,0,0,0.1)';try{chart.options.scales.y_tests.gridLines.color='rgba(0,0,0,0.1)',chart.options.scales.y_tests.gridLines.color='rgba(0,0,0,0.1)'}catch{}}}function reloadChartForTraitChange(a){'trait'=='darkMode'&&restyleChartForDarkMode(),chart.update()}