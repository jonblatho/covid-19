        </main>
        <footer>
            <div class="wrap">
                <p class="footer">&copy; {{ now.Format "2006"}} &middot; Generated {{ now.Format "3:04 PM MST, January 2, 2006" }} &middot; <a href="https://github.com/jonblatho/covid-19">View on GitHub</a></p>
            </div>
        </footer>
        {{ if .IsHome }}
        {{ $data := resources.Get "js/chart-data.json" | resources.Minify }}
        {{ $dataJS := resources.Get "js/chart-data.js" | resources.Minify | resources.Fingerprint }}
        {{ $configJS := resources.Get "js/chart-config.js" | resources.Minify | resources.Fingerprint }}
        {{ $uiJS := resources.Get "js/chart-ui.js" | resources.Minify | resources.Fingerprint }}
        {{ $dateMarkersJS := resources.Get "js/chart-date-markers.js" | resources.Minify }}
        <script src="{{ $dataJS.Permalink }}" integrity="{{ $dataJS.Data.Integrity }}"></script>
        <script src="{{ $configJS.Permalink }}" integrity="{{ $configJS.Data.Integrity }}"></script>
        <script src="{{ $uiJS.Permalink }}" integrity="{{ $uiJS.Data.Integrity }}"></script>
        <script src="{{ $dateMarkersJS.Permalink }}" integrity="{{ $dateMarkersJS.Data.Integrity }}"></script>
        <script>
            var chart = new Chart(ctx);
            let url = '{{ $data.Permalink }}';

            loadData(url);

            // Listen for dark mode changes
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
                reloadChartForTraitChange('darkMode');
            });

            window.matchMedia('(max-width: 600px)').addListener(function (e) {
                chart.options.plugins.annotation = {};
                chart.update();
            });

            window.matchMedia('(min-width: 601px)').addListener(function (e) {
                addDateMarkers();
                if(!dateMarkersButton.classList.contains(selectedClassName)){
                    dateMarkersButton.classList.add(selectedClassName);
                }
                chart.update();
            });
        </script>
        {{ end }}
    </body>
</html>